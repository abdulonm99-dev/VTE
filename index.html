<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VTE Prophylaxis Guideline Calculator v2</title>
    <style>
        :root {
            --primary-color: #005a9c; /* A professional blue */
            --secondary-color: #f0f8ff; /* Light blue background */
            --accent-color-yes: #28a745; /* Green for 'Yes' */
            --accent-color-no: #dc3545; /* Red for 'No' */
            --text-color: #333;
            --border-color: #ddd;
            --card-bg: #ffffff;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 600px;
            width: 100%;
            background-color: var(--card-bg);
            padding: 25px 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }
        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            margin-top: 0;
        }
        h1 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            margin-bottom: 25px;
            color: #666;
        }
        .question-box, .result-box {
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-top: 20px;
            background-color: #fafafa;
        }
        .question-text {
            font-size: 1.2em;
            font-weight: 500;
            margin-bottom: 15px;
            text-align: center;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        button {
            padding: 12px 25px;
            font-size: 1em;
            font-weight: bold;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: white;
            min-width: 100px;
        }
        .yes-btn { background-color: var(--accent-color-yes); }
        .yes-btn:hover { background-color: #218838; transform: translateY(-2px); }
        .no-btn { background-color: var(--accent-color-no); }
        .no-btn:hover { background-color: #c82333; transform: translateY(-2px); }
        .submit-btn { background-color: var(--primary-color); }
        .submit-btn:hover { background-color: #004b80; transform: translateY(-2px); }
        
        #restart-button {
            display: block;
            margin: 20px auto 0;
            background-color: #6c757d;
        }
        #restart-button:hover { background-color: #5a6268; }

        .result-box {
            background-color: #e3f2fd;
            border-color: #90caf9;
        }
        #result-text {
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            color: var(--primary-color);
        }
        .input-group {
            text-align: center;
        }
        .input-group label {
            font-weight: 500;
            margin-right: 10px;
        }
        .input-group input {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            width: 80px;
            font-size: 1em;
            text-align: center;
        }
        .disclaimer {
            font-size: 0.8em;
            color: #777;
            text-align: center;
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        .hidden {
            display: none;
        }
        /* ---- NEW STYLES FOR CRITERIA LISTS ---- */
        .criteria-details {
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
        }
        .criteria-details h4 {
            margin-top: 0;
            margin-bottom: 8px;
            color: #495057;
            font-size: 1em;
            text-align: left;
            font-weight: 600;
        }
        .criteria-list {
            list-style-type: disc;
            list-style-position: inside;
            text-align: left;
            padding-left: 10px;
            margin: 0;
        }
        .criteria-list li {
            margin-bottom: 5px;
            color: var(--text-color);
        }
    </style>
</head>
<body>

<div class="container">
    <h1>VTE Prophylaxis Calculator</h1>
    <p class="subtitle">For Acutely Ill Medicine Patients</p>

    <div id="quiz-container">
        <div id="q-contraindication" class="question-box">
            <p class="question-text">Does the patient have an Anticoagulation Contraindication?</p>
            
            <div class="criteria-details">
                <h4>Review Contraindications:</h4>
                <ul class="criteria-list">
                    <li>Active Bleeding</li>
                    <li>Current Anticoagulation</li>
                    <li>Platelets < 30,000/uL</li>
                    <li>Cirrhosis with Platelets < 40,000/uL</li>
                    <li>Malignant HTN</li>
                    <li>Coagulopathy / INR > 1.5</li>
                </ul>
            </div>
            <div class="button-group">
                <button class="yes-btn" onclick="showResult('Hold Anticoagulation & Initiate Mechanical Prophylaxis.<br><small>Reassess contraindications in 24 hours.</small>')">Yes</button>
                <button class="no-btn" onclick="showNext('q-contraindication', 'q-cancer')">No</button>
            </div>
        </div>

        <div id="q-cancer" class="question-box hidden">
            <p class="question-text">Does the patient have Active Cancer?</p>
            <div class="button-group">
                <button class="yes-btn" onclick="showResult('Administer LMWH during inpatient stay.<br><small>Calculate the Khorana Score and prescribe a DOAC at discharge.</small>')">Yes</button>
                <button class="no-btn" onclick="showNext('q-cancer', 'q-doac-exclusion')">No</button>
            </div>
        </div>
        
        <div id="q-doac-exclusion" class="question-box hidden">
            <p class="question-text">Does the patient meet any DOAC / Rivaroxaban exclusion criteria?</p>
            
            <div class="criteria-details">
                <h4>DOAC Exclusions:</h4>
                <ul class="criteria-list">
                    <li>Surgery Expected</li>
                    <li>Cannot Tolerate Oral Meds</li>
                    <li>On itraconazole, ketoconazole, phenytoin, or rifampin</li>
                    <li>Child Pugh Class C</li>
                    <li>Hypersensitivity Reactions / Treatment Failure</li>
                </ul>
                <h4 style="margin-top: 15px;">Specific Rivaroxaban Exclusions:</h4>
                 <ul class="criteria-list">
                    <li>High Risk Antiphospholipid Syndrome</li>
                    <li>Child Pugh B or C Liver Disease</li>
                    <li>Valvular Heart Disease</li>
                </ul>
            </div>
            <div class="button-group">
                <button class="yes-btn" onclick="showNext('q-doac-exclusion', 'q-crcl-enoxaparin')">Yes</button>
                <button class="no-btn" onclick="showNext('q-doac-exclusion', 'q-crcl-doac')">No</button>
            </div>
        </div>

        <div id="q-crcl-doac" class="question-box hidden">
            <p class="question-text">Is the patient's Creatinine Clearance < 30?</p>
            <div class="button-group">
                <button class="yes-btn" onclick="showResult('Prescribe Apixaban 2.5mg PO BID.')">Yes</button>
                <button class="no-btn" onclick="showResult('Prescribe Rivaroxaban 10mg PO Daily<br>OR<br>Apixaban 2.5mg PO BID.')">No</button>
            </div>
        </div>
        
        <div id="q-crcl-enoxaparin" class="question-box hidden">
             <p class="question-text">Is the patient's Creatinine Clearance < 30?</p>
            <div class="button-group">
                <button class="yes-btn" onclick="showNext('q-crcl-enoxaparin', 'q-bmi-heparin')">Yes</button> <button class="no-btn" onclick="showNext('q-crcl-enoxaparin', 'q-bmi-enoxaparin')">No</button> </div>
        </div>
        
        <div id="q-bmi-enoxaparin" class="question-box hidden">
            <p class="question-text">Enter the patient's BMI:</p>
            <div class="input-group">
                 <input type="number" id="bmi-enox-input" placeholder="e.g., 25" step="0.1">
            </div>
            <br>
            <div class="button-group">
                <button class="submit-btn" onclick="handleBmiEnoxaparin()">Submit</button>
            </div>
        </div>

        <div id="q-bmi-heparin" class="question-box hidden">
            <p class="question-text">Is the patient's BMI > 40?</p>
            <div class="button-group">
                <button class="yes-btn" onclick="showResult('Heparin 7,500 Units SQ TID.<br><small>Monitor for bleeding.</small>')">Yes</button>
                <button class="no-btn" onclick="showResult('Heparin 5,000 Units TID<br>OR<br>Enoxaparin 30mg SQ Daily.<br><small>Monitor for bleeding.</small>')">No</button>
            </div>
        </div>
    </div>
    
    <div id="result-container" class="result-box hidden">
        <h2>Recommendation</h2>
        <p id="result-text"></p>
        <button id="restart-button" onclick="restartQuiz()">Start Over</button>
    </div>

    <p class="disclaimer">
        This tool is for informational and educational purposes only and is based on the provided VTE clinical practice guideline. It does not constitute medical advice and should not replace professional clinical judgment.
    </p>

</div>

<script>
    function showNext(currentId, nextId) {
        document.getElementById(currentId).classList.add('hidden');
        document.getElementById(nextId).classList.remove('hidden');
    }

    function showResult(resultHtml) {
        document.getElementById('quiz-container').classList.add('hidden');
        const resultContainer = document.getElementById('result-container');
        const resultText = document.getElementById('result-text');
        
        resultText.innerHTML = resultHtml;
        resultContainer.classList.remove('hidden');
    }
    
    function handleBmiEnoxaparin() {
        const bmi = parseFloat(document.getElementById('bmi-enox-input').value);
        if (isNaN(bmi)) {
            alert("Please enter a valid BMI.");
            return;
        }

        if (bmi < 18) {
            showResult('Enoxaparin 30mg SQ Daily.');
        } else if (bmi >= 18 && bmi <= 40) {
            showResult('Enoxaparin 40mg SQ Daily.');
        } else { // BMI > 40
            showResult('Enoxaparin 0.5mg/kg SQ Daily (Max Dose=100mg).<br><small>Check Anti-Xa level 4 hours after the 3rd dose (goal is 0.2-0.5).</small>');
        }
    }

    function restartQuiz() {
        // Hide result
        document.getElementById('result-container').classList.add('hidden');
        
        // Hide all question boxes
        const questionBoxes = document.querySelectorAll('.question-box');
        questionBoxes.forEach(box => {
            box.classList.add('hidden');
        });

        // Clear input fields
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => input.value = '');
        
        // Show the first question and the main container
        document.getElementById('q-contraindication').classList.remove('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
    }
</script>

</body>
</html>
